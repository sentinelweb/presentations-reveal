<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Client side tensorflow </title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/league.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">
	<link rel="stylesheet" href="tensorflow_client.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
	<style>
		
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<!-- make QR code : https://sentinelweb.github.io/reveal.js/beyond_mvp.html -->
			<!-- page 1 -->
			<section>
				<h2>Client side tensorflow</h2>
			</section>
			<!-- page 2 -->
			<section>
				<h2>What we will cover ...</h2>
				<ul>
					<li class="fragment fade-up">Jargon buster</li>
					<li class="fragment fade-up">20,000 mile high overview of tensorflow Ecosystem</li>
					<li class="fragment fade-up">TFLite model deployment on Android &amp; iOS</li>
					<li class="fragment fade-up">Tensorflow.js</li>
					<li class="fragment fade-up">Client side pros &amp; cons</li>
					<li class="fragment fade-up">Possible usages</li>
					<li class="fragment fade-up">Learning</li>
				</ul>
			</section>
			<section>
				<h2>Jargon buster</h2>
			</section>
			<section>
				<h2>Neural network</h2>
				<ul>
					<li class="fragment fade-up">Transforms a set of inputs (features) into outputs (classifications)</li>
					<li class="fragment fade-up">Use a dataset to train and measure classification accuracy (RMS)</li>
					<li class="fragment fade-up">Consists of N-layers which can be a weight, and an activation function (switch).</li>
					<li class="fragment fade-up">During training the error is propagated backwards to refine weights</li>
					<li class="fragment fade-up">Produces a
						<i>Model</i> which can used to classify input features</li>
				</ul>
			</section>
			<section>
				<h2>Deep learning / Deep Neural network</h2>
				<ul>
					<li class="fragment fade-up">A neural net with many layers</li>
					<li class="fragment fade-up">Produces more accurate results but is more expensive</li>
				</ul>
			</section>
			<section>
				<h2>Transfer learning</h2>
				<ul>
					<li class="fragment fade-up">A pre-trained neural net which can be refined by just training the final layers</li>
					<li class="fragment fade-up">Requires less computationally expensive and less data to train</li>
				</ul>
			</section>
			<section>
				<h2>MobileNet</h2>
				<ul>
					<li class="fragment fade-up">A set of image recognition models produced by google</li>
					<li class="fragment fade-up">Optimised for efficiency on mobile</li>
					<li class="fragment fade-up">Can be retrained for a specific purpose using transfer learning</li>
				</ul>
			</section>
			<section>
				<h2>Tensorflow Ecosystem</h2>
			</section>
			<section>
				<h2>Tensorflow API</h2>
				<ul>
					<li class="fragment fade-up">A set of numerical computation APIs that builds a graph</li>
					<li class="fragment fade-up">Graph gets built then executed on hardware, CPU, GPU, TPU</li>
					<li class="fragment fade-up">Languages Python, Java (Kotlin), Go, C, JavaScript (New), Swift (Early stage)</li>
					<li class="fragment fade-up">Python is the most advanced - others are at various stages</li>
				</ul>
			</section>
			<section>
				<h2>Tensorflow API - Basics</h2>
				<ul>
					<li class="fragment fade-up">The graph is is executed in a <code>tf.Session()</code></li>
					<li class="fragment fade-up">TODO</li>
				</ul>
			</section>
			<section>
				<h2>Tensorflow sub-projects</h2>
				<ul>
					<li class="fragment fade-up"><span class="leader">Tensorflow.js</span> : Javascript bindng for tensorflow</li>
					<li class="fragment fade-up">Tensorflow Lite : Optimised &amp; efficient runtime for embedded / mobile devices</li>
					<li class="fragment fade-up">Tensorflow Mobile : TFLite's predecessor - less optimised but has more TF operations</li>
					<li class="fragment fade-up">Hub : Collaboration library to share tensorflow modules &amp; components</li>
					<li class="fragment fade-up">TFX : Production utilites ad optimisation</li>
					<li class="fragment fade-up">Magenta : Art and music experimentation projects</li>
				</ul>
			</section>
			<section>
				<h2>Retraining a model</h2>
				<ul>
					<li class="fragment fade-up">Use MobileNet Model as a base to perform transfer learning on a set of images</li>
					<li class="fragment fade-up">Can use Tensorboard to monitor progress and debug graph</li>
				</ul>
			</section>
			<section>
				<h2>Tensorflow Lite (TFLite)</h2>
				<ul>
					<li class="fragment fade-up">Optimised runtime for tensorflow models (Mobile/embedded)</li>
					<li class="fragment fade-up">Model is converted to .lite format using a tool called
						<code>toco</code>
					</li class="fragment fade-up">
					<li class="fragment fade-up">Lite format uses FlatBuffers - memory mapped for efficiency</li>
					<li class="fragment fade-up">Only supports a subset of Tensorflow operations (No transfer learning)</li>
				</ul>
			</section>
			<section>
				<h2>TFLite - Integration Android</h2>
				<pre><code>
Interpreter tflite = new Interpreter(loadModelFile());
List&lt;String&gt; labelList = loadLabelList(activity);
ByteBuffer imgData =
        ByteBuffer.allocateDirect(
            4 * IMG_SIZE_X * IMG_SIZE_Y * DIM_PIXEL_SIZE);
imgData.order(ByteOrder.nativeOrder());
labelProbArray = new float[1][labelList.size()];

// on image received
convertBitmapToByteBuffer(bitmap); // converts byte format
tflite.run(imgData, labelProbArray); // probabilities in array
					</code></pre>
			</section>
			<section>
				<h2>TFLite - Integration iOS</h2>
				<pre><code style="max-height:500px;max-width:1000px;">
std::vector&lt;std::string&gt; labels;
std::unique_ptr&lt;tflite::FlatBufferModel&gt; model;
tflite::ops::builtin::BuiltinOpResolver resolver;
std::unique_ptr&lt;tflite::Interpreter&gt; interpreter;

// loading model and configure tflite instance
NSString* graph_path = FilePathForResourceName(model_file_name, model_file_type);
model = tflite::FlatBufferModel::BuildFromFile([graph_path UTF8String]);
tflite::ops::builtin::BuiltinOpResolver resolver;
LoadLabels(labels_file_name, labels_file_type, &labels);
tflite::InterpreterBuilder(*model, resolver)(&interpreter);

// on image capture
[self inputImageToModel:image]; // converts byte format
interpreter-&gt;Invoke() 
float* output = interpreter-&gt;typed_output_tensor&lt;float&gt;(0);// probabilities in array
					</code></pre>
			</section>
			<section>
				<h2>Tensorflow.js</h2>
				<ul>
					<li class="fragment fade-up">Javascript binding for the Tensorflow C library</li>
					<li class="fragment fade-up">Works in browser &amp; NPM</li>
					<li class="fragment fade-up">Can do transfer learning / retraining</li>
					<li class="fragment fade-up">Can use WebGL (Linux only ATM)</li>
					<li class="fragment fade-up">Can use browser sensor data directly to retrain models</li>
					<li class="fragment fade-up">Not as fast as native implementations - gets slower with larger models</li>
					<li class="fragment fade-up">Exporting models in development progress</li>
				</ul>
			</section>
			<section>
				<h2>Tensorflow.js - installation</h2>
				<ul>
					<li class="fragment fade-up">
						<code>yarn add @tensorflow/tfjs</code>
					</li>
					<li class="fragment fade-up">
						<code>node getting-started.js</code> &lt;-- whatever file
					</li>
				</ul>
			</section>
			<section>
				<h2>Client side ML - Advantages</h2>
				<ul>
					<li class="fragment fade-up">Free compute power (for running NN and feature processing)</li>
					<li class="fragment fade-up">Free Real-time high definition data</li>
					<li class="fragment fade-up">Low latency</li>
					<li class="fragment fade-up">Access to onboard devices and hardware (camera, sensors, mic)</li>
					<li class="fragment fade-up">Customer data security - data doesnt leave device</li>
					<li class="fragment fade-up">for TF.js can use device input for retraining</li>
				</ul>
			</section>
			<section>
				<h2>Client side ML - Disdvantages</h2>
				<ul>
					<li class="fragment fade-up">Power usage can be high</li>
					<li class="fragment fade-up">Need to lots of model optimisation</li>
				</ul>
			</section>
			<section>
				<h2>Usages/ideas .. toil reduction</h2>
				<ul>
					<li class="fragment fade-up">UI customisation for the user</li>
					<li class="fragment fade-up">Image recognition - read tickets &amp; timetable boards (crowdsource rt data)</li>
					<li class="fragment fade-up">Help assistant - NLP</li>
				</ul>
			</section>
			<section>
				<h2>Learning utilities</h2>
				<ul>
					<li> class="fragment fade-up"Machine learning crash course :<br/>
						<a href="https://developers.google.com/machine-learning/crash-course/">https://developers.google.com/machine-learning/crash-course/</a></li>
					<li class="fragment fade-up">Tensorflow for poets codelabs :<br/>
						<a href="https://codelabs.developers.google.com/?cat=TensorFlow">https://codelabs.developers.google.com/?cat=TensorFlow</a></li>
					<li class="fragment fade-up">Most are done in Robs learning repo:
							<a href="https://github.com/sentinelweb/tensorflow_learn">https://github.com/sentinelweb/tensorflow_learn</a>
					</li>
				</ul>
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			],
			history: true,
			loop: true,
			slideNumber: 'c/v/t'
		});
	</script>
</body>

</html>